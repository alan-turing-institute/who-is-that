{% extends "index.html" %}

{% block title %}
    Upload EPUB
{% endblock %}

{% block content %}
    <img
        src="{{ url_for('static', filename='logo.png') }}"
        alt="Logo"
        class="image"
    />

    <h1 class="title is-large">Who is that?</h1>
    <h2>Upload an EPUB file</h2>

    <script>
        // Attach scripts after the DOM content is loaded
        document.addEventListener("DOMContentLoaded", () => {
            const fileInput = document.querySelector("#file-js-example input[type=file]");
            // const uploadButton = document.getElementById("upload-button");
            if (fileInput) {
                fileInput.onchange = () => {
                    const uploadButton = document.getElementById("upload-button");
                    if (fileInput.files.length > 0) {
                    uploadButton.disabled = false;
                    const fileName = document.querySelector("#file-js-example .file-name");
                    fileName.textContent = fileInput.files[0].name;
                    } else {
                    uploadButton.disabled = true;
                    }
                };
            }
        });
    </script>

    <form action="/" method="post" enctype="multipart/form-data">
        <div id="file-js-example" class="file has-name">
            <label class="file-label">
            <input class="file-input" type="file" name="file" />
            <span class="file-cta">
                <span class="file-icon">
                <i class="fas fa-upload"></i>
                </span>
                <span class="file-label"> Choose a fileâ€¦ </span>
            </span>
            <span class="file-name" name="file"> No file uploaded </span>
            </label>
        </div>
        <button class="button" id="upload-button" type="submit" disabled>
            Upload
        </button>
    </form>
{% endblock %}
